#include <stdio.h>

void printMap(char mapa[27][77]) {
    for (int i = 0; i < 27; i++) {
        for (int j = 0; j < 77; j++) {
            if (mapa[i][j] == 'o') {
                printf("o");
            }
            else if (mapa[i][j] == '@') {
                printf("C");
            }
            else if (mapa[i][j] == 'R') {
                printf("R");
            }
            else if (mapa[i][j] == 'B') {
                printf("B");
            }
            else if (mapa[i][j] == 'P') {
                printf("P");
            }
            else if (mapa[i][j] == 'O') {
                printf("O");
            }
            else if (mapa[i][j] == '=') {
                printf("=");
            }
            else if (mapa[i][j] == ' ') {
                printf(" ");
            }
            else if (mapa[i][j] == '1') {
                printf(".");
            }
            else if (mapa[i][j] == '#') {
                printf("@");
            }
            else if (mapa[i][j] == '0') {
                printf("─");
            }
            else if (mapa[i][j] == '2') {
                printf("│");
            }
            else if (mapa[i][j] == '3') {
                printf("┐");
            }
            else if (mapa[i][j] == '4') {
                printf("┘");
            }
            else if (mapa[i][j] == '5') {
                printf("└");
            }
            else if (mapa[i][j] == '6') {
                printf("┌");
            }
        }
        printf("\n");  
    }
}

void Move(char mapa[27][77], char move) {
    for (int i = 0; i < 27; i++) {
        for (int j = 0; j < 77; j++) {
            
            if (mapa[i][j] == '@') {
                if (move == 'D' && j + 1 < 77) {
                    if (mapa[i][j + 1] == '#'){
                        mapa[i][j] = '@';
                        return;
                    }
                    else {
                        mapa[i][j] = ' ';
                        mapa[i][j + 1] = '@';
                        return;
                    }
                    
                } 
                else if (move == 'A' && j - 1 >= 0) {
                    if (mapa [i][j - 1] == '#'){
                        mapa[i][j] = '@';
                        return;
                    }
                    else {
                    mapa[i][j] = ' ';
                    mapa[i][j - 1] = '@';
                    return;
                    }
                    
                } 
                else if (move == 'W' && i - 1 >= 0) {
                    if (mapa[i - 1][j] == '#'){
                        mapa[i][j] = '@';
                        return;
                    }
                    else{
                    mapa[i][j] = ' ';
                    mapa[i - 1][j] = '@';
                    return;
                    }
                    
                } 
                else if (move == 'S' && i + 1 < 27) {
                    if (mapa[i + 1][j] == '#'){
                        mapa[i][j] = '@';
                        return;
                    }
                    else{
                        mapa[i][j] = ' ';
                        mapa[i + 1][j] = '@';
                        return;
                    }
                }
            }
        }
    }
}

int main() {
    while (1){
        char mapa[27][77] = {
    "6000000000000000000000000000000000000000000000000000000000000000000000000003",
    "2##########################################################################2",
    "2#111111111111111111111111111111111#111#1111111111111111111111111111111111#2",
    "2#1###1#############1#############1#1#1#1############1###############1###1#2",
    "2#o111111111#111111111111111111111111#1111#111111111111111111111111111111o#2",
    "2#####1####1#1######1########1###########1#1########1#########1############2",
    "2#11111#11111111111#111#111111111111111111#1111###11111###1111111111111111#2",
    "2#1###1#1#########1#1#1#1#1#1##########1###1##11111###11111###1#1###1#1##1#2",
    "2#11#11#1111111111111#111#1#1111111111111111111#############111#111#1#1111#2",
    "2##1#1##1####1######1#####1#1#1#####=#####1#1#1111111#1111111#1#1#11111##1#2",
    "2##1#1111111111111111111#1111#1#R       B#1#1#######1#1#######1#1#1###11#1#2",
    "2##1#1#####1###########1#1##1#1#         #1#1111111111111111111111111##1#1#2",
    "2##1111111#1#1111111111111##1#1#P       O#1############1##########1#111111#2",
    "2#####1####1#1###1#######1##1#1###########1#111111111111#11111111#1##1#####2",
    "211111111111111111111111#1##1#111111111111111##########1##########1111111112",
    "2#####1################111111#1##1#####1##1#111111111111111111111111###1###2",
    "2#1111111#1111111111#111######1##1111111##1####1####1#####1##1#1#111#11111#2",
    "2#1#####1#1########1#1###111#11111#####1111111#1####1#11111##1#1#1###1#1#1#2",
    "2#1#1111111111111111111111#111#####111#####1#1#111111#1#1#1##1#111111111#1#2",
    "2#1#1#######1##############1#1111111#1111111#1######1#1#1#1##1#1#########1#2",
    "2#111111#11111111111111#1111#1#############1#1111#11111#111111#11111111111#2",
    "2######1#1#1##########111####111111111111111####111##########1#####1#1###1#2",
    "2#11111111#111111111111#111111###1#####1###111111#111111111111111111#11111#2",
    "2#1###1#1##1#1####1##########1###111#111###1##########1#1##########111###1#2",
    "2#o1111#1111#111111111111111111111#1@1#1111111111111111#111111111111#1111o#2",
    "2##########################################################################2",
    "5000000000000000000000000000000000000000000000000000000000000000000000000004"
    };
        while (1) {
        char move;
        printMap(mapa);
        scanf(" %c", &move);

        if (move >= 97 && move <= 122) {
            move = move - 32; 
        }

        Move(mapa, move); 
    }
    
}   return 0;
    }
    

  
// teste de mapa
// char mapa[25][75] = {
//         "##########################################################################",
//         "#                                 #   #                                  #",
//         "# ### ############# ############# # # # ############ ############### ### #",
//         "#o         #                        #    #                              o#",
//         "##### #### # ###### ######## ########### # ######## ######### ############",
//         "#     #           #   #                  #    ###     ###                #",
//         "# ### # ######### # # # # # ########## ### ##     ###     ### # ### # ## #",
//         "#  #  #             #   # #                   #############   #   # #    #",
//         "## # ## #### ###### ##### # # #####=##### # #       #       # # #     ## #",
//         "## #                   #    # #1       2# # ####### # ####### # # ###  # #",
//         "## # ##### ########### # ## # #         # #                         ## # #",
//         "##       # #             ## # #3       4# ############ ########## #      #",
//         "##### #### # ### ####### ## # ########### #            #        # ## #####",
//         "                       # ## #               ########## ##########         ",
//         "##### ################      # ## ##### ## #                        ### ###",
//         "#       #          #   ###### ##       ## #### #### ##### ## # #   #     #",
//         "# ##### # ######## # ###   #     #####       # #### #     ## # # ### # # #",
//         "# #                      #   #####   #####   #      # # # ## #         # #",
//         "# # ####### ############## #       #       # ###### # # # ## # ######### #",
//         "#      #              #    # ############# #    #     #      #           #",
//         "###### # # ##########   ####               ####   ########## ##### # ### #",
//         "#        #            #      ### ##### ###      #                  #     #",
//         "# ### # ## # #### ########## ###   #   ### ########## # ##########   ### #",
//         "#o    #    #                     # @ #                #            #    o#",
//         "##########################################################################",
// };


// COPIA DE SEGURANÇA MAPA SEM PONTOS
// ┌──────────────────────────────────────────────────────────────────────────┐
// │##########################################################################│
// │#                                 #   #                                  #│
// │# ### ############# ############# # # # ############ ############### ### #│
// │#o         #                        #    #                              o#│
// │##### #### # ###### ######## ########### # ######## ######### ############│
// │#     #           #   #                  #    ###     ###                #│
// │# ### # ######### # # # # # ########## ### ##     ###     ### # ### # ## #│
// │#  #  #             #   # #                   #############   #   # #    #│
// │## # ## #### ###### ##### # # #####=##### # #       #       # # #     ## #│
// │## #                   #    # #1       2# # ####### # ####### # # ###  # #│
// │## # ##### ########### # ## # #         # #                         ## # #│
// │##       # #             ## # #3       4# ############ ########## #      #│
// │##### #### # ### ####### ## # ########### #            #        # ## #####│
// │                       # ## #               ########## ##########         │
// │##### ################      # ## ##### ## #                        ### ###│
// │#       #          #   ###### ##       ## #### #### ##### ## # #   #     #│
// │# ##### # ######## # ###   #     #####       # #### #     ## # # ### # # #│
// │# #                      #   #####   #####   #      # # # ## #         # #│
// │# # ####### ############## #       #       # ###### # # # ## # ######### #│
// │#      #              #    # ############# #    #     #      #           #│
// │###### # # ##########   ####               ####   ########## ##### # ### #│
// │#        #            #      ### ##### ###      #                  #     #│
// │# ### # ## # #### ########## ###   #   ### ########## # ##########   ### #│
// │#o    #    #                     # @ #                #            #    o#│
// │##########################################################################│
// └──────────────────────────────────────────────────────────────────────────┘
